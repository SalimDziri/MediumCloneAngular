"use strict";(self.webpackChunkmediumclone_angular=self.webpackChunkmediumclone_angular||[]).push([[83],{9083:(Jt,C,l)=>{l.r(C),l.d(C,{HomeModule:()=>Ut});var u=l(9808),M=l(1453),x=l(9291),O=l(4447),p=l(991),r=l(1075),b=l(2947),U=l(5698),t=l(5e3),A=l(5620),f=l(7093),Z=l(3251);let P=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-loading-article"]],decls:42,vars:0,consts:[[1,"wrapper"],["fxLayout","column",1,"wrapper-cell"],["fxLayout","row","fxLayoutAlign"," center",1,"wrapper-cell"],[1,"image"],[1,"text","title"],[1,"text-line-header"],[1,"text-line"],[1,"text","body"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4),t._UZ(5,"div",5)(6,"div",5),t.qZA()(),t.TgZ(7,"div",4),t._UZ(8,"div",6),t.qZA(),t.TgZ(9,"div",7),t._UZ(10,"div",6)(11,"div",6)(12,"div",6)(13,"div",6),t.qZA()()(),t.TgZ(14,"div",0)(15,"div",1)(16,"div",2),t._UZ(17,"div",3),t.TgZ(18,"div",4),t._UZ(19,"div",5)(20,"div",5),t.qZA()(),t.TgZ(21,"div",4),t._UZ(22,"div",6),t.qZA(),t.TgZ(23,"div",7),t._UZ(24,"div",6)(25,"div",6)(26,"div",6)(27,"div",6),t.qZA()()(),t.TgZ(28,"div",0)(29,"div",1)(30,"div",2),t._UZ(31,"div",3),t.TgZ(32,"div",4),t._UZ(33,"div",5)(34,"div",5),t.qZA()(),t.TgZ(35,"div",4),t._UZ(36,"div",6),t.qZA(),t.TgZ(37,"div",7),t._UZ(38,"div",6)(39,"div",6)(40,"div",6)(41,"div",6),t.qZA()()())},directives:[f.xw,f.Wh],styles:[".wrapper[_ngcontent-%COMP%]{background:#fff;width:100%;height:auto}.header-cell[_ngcontent-%COMP%]{width:inherit!important}@keyframes placeHolderShimmer{0%{background-position:-50vw 0}to{background-position:50vw 0}}.animated-background[_ngcontent-%COMP%], .text-line[_ngcontent-%COMP%], .text-line-header[_ngcontent-%COMP%], .image[_ngcontent-%COMP%]{animation-duration:1.5s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:placeHolderShimmer;animation-timing-function:linear;background:#F6F6F6;background:linear-gradient(to right,#F6F6F6 8%,#F0F0F0 18%,#F6F6F6 33%);background-size:95vw;height:96px;position:relative}.image[_ngcontent-%COMP%]{height:40px;width:40px}.text-line-header[_ngcontent-%COMP%]{height:1rem;width:20vw;margin:4px 0}.text-line[_ngcontent-%COMP%]{height:1rem;width:100%;margin:4px 0}.title[_ngcontent-%COMP%], .body[_ngcontent-%COMP%], .image[_ngcontent-%COMP%]{margin:.5rem}"]}),e})();var y=l(3322),T=l(5245),F=l(773),J=l(7496),I=l(4354);let Q=(()=>{class e{transform(n){const a=n.split(" ");return a.length>40?a.slice(0,40).join(" ")+" ....":n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"shorten",type:e,pure:!0}),e})();function S(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"favorite_border"),t.qZA())}function k(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"favorite"),t.qZA())}const L=function(e,i){return{favorite:e,"non-favorite":i}};function H(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",17),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return 1==a.article.favorited?a.unfavorite(a.article.slug):a.favorite(a.article.slug)}),t.YNc(1,S,2,0,"mat-icon",18),t.YNc(2,k,2,0,"mat-icon",18),t._uU(3),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("ngClass",t.WLB(4,L,n.article.favorited,!n.article.favorited)),t.xp6(1),t.Q6J("ngIf",0==n.article.favorited),t.xp6(1),t.Q6J("ngIf",1==n.article.favorited),t.xp6(1),t.hij(" ",n.article.favoritesCount," ")}}function N(e,i){if(1&e&&(t.TgZ(0,"div",19),t._UZ(1,"mat-spinner",20),t._uU(2),t.qZA()),2&e){const n=t.oxw();t.Q6J("ngClass",t.WLB(3,L,n.article.favorited,!n.article.favorited)),t.xp6(1),t.Q6J("diameter",25),t.xp6(1),t.hij(" ",n.article.favoritesCount," ")}}function Y(e,i){if(1&e&&(t.TgZ(0,"div",21)(1,"span",22),t._uU(2),t.qZA()()),2&e){const n=i.$implicit;t.xp6(2),t.Oqu(n)}}let w=(()=>{class e{constructor(n,o){this.store=n,this.router=o,this.loadingFavorite$=this.store.select(p.Ud)}ngOnInit(){}favorite(n){this.store.dispatch(r.i$.favorite(n))}unfavorite(n){this.store.dispatch(r.i$.unfavorite(n))}goToProfile(n){this.router.navigateByUrl(`profile/${n}`)}goToArticle(n){console.log("going to "+n),this.router.navigateByUrl(`articles/${n}`)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(A.yh),t.Y36(x.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-article"]],inputs:{article:"article"},decls:28,vars:19,consts:[["fxLayout","column",1,"article-container"],["fxLayout","row",1,"header"],[1,"profile-pic"],[3,"src","alt","click"],["fxLayout","column","fxFlex","50",1,"info"],[1,"author",3,"click"],[1,"date"],["fxFlex","50","fxLayoutAlign","end center",1,"favorite-count"],["fxLayoutAlign","center center","class","clickable",3,"ngClass","click",4,"ngIf"],["fxLayoutAlign","center center","class","non-clickable",3,"ngClass",4,"ngIf"],[1,"title",3,"click"],[1,"content",3,"click"],[1,"body",3,"innerHTML"],["fxLayout","row",1,"footer"],["fxFlex","50"],["fxFlex","50","fxLayoutAlign","end"],["fxLayout","row",4,"ngFor","ngForOf"],["fxLayoutAlign","center center",1,"clickable",3,"ngClass","click"],[4,"ngIf"],["fxLayoutAlign","center center",1,"non-clickable",3,"ngClass"],["color","white",3,"diameter"],["fxLayout","row"],[1,"tag-item"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"img",3),t.NdJ("click",function(){return o.goToProfile(o.article.author.username)}),t.qZA()(),t.TgZ(4,"div",4)(5,"div",5),t.NdJ("click",function(){return o.goToProfile(o.article.author.username)}),t._uU(6),t.qZA(),t.TgZ(7,"div",6),t._uU(8),t.ALo(9,"timeAgo"),t.qZA()(),t.TgZ(10,"div",7),t.YNc(11,H,4,7,"div",8),t.ALo(12,"async"),t.YNc(13,N,3,6,"div",9),t.ALo(14,"async"),t.qZA()(),t.TgZ(15,"div",10),t.NdJ("click",function(){return o.goToArticle(o.article.slug)}),t.TgZ(16,"h2"),t._uU(17),t.qZA()(),t.TgZ(18,"div",11),t.NdJ("click",function(){return o.goToArticle(o.article.slug)}),t._UZ(19,"pre",12),t.ALo(20,"lineBreaks"),t.ALo(21,"shorten"),t._UZ(22,"br"),t.TgZ(23,"div",13)(24,"div",14),t._uU(25,"Read more..."),t.qZA(),t.TgZ(26,"div",15),t.YNc(27,Y,3,1,"div",16),t.qZA()()()()),2&n&&(t.xp6(3),t.s9C("src",o.article.author.image,t.LSH),t.MGl("alt","",o.article.author.username," Profile picture"),t.xp6(3),t.Oqu(o.article.author.username),t.xp6(2),t.Oqu(t.lcZ(9,9,o.article.updatedAt)),t.xp6(3),t.Q6J("ngIf",t.lcZ(12,11,o.loadingFavorite$)!==o.article.slug),t.xp6(2),t.Q6J("ngIf",t.lcZ(14,13,o.loadingFavorite$)===o.article.slug),t.xp6(4),t.Oqu(o.article.title),t.xp6(2),t.Q6J("innerHTML",t.lcZ(20,15,t.lcZ(21,17,o.article.body)),t.oJD),t.xp6(8),t.Q6J("ngForOf",o.article.tagList))},directives:[f.xw,f.yH,f.Wh,u.O5,u.mk,y.oO,T.Hw,F.Ou,u.sg],pipes:[J.e,u.Ov,I.R,Q],styles:[".article-container[_ngcontent-%COMP%]{margin:.5rem;padding:.8rem}.profile-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;height:40px}.info[_ngcontent-%COMP%]{padding-left:.5rem}.author[_ngcontent-%COMP%]{color:#5cb85c}.date[_ngcontent-%COMP%]{color:#bbb}.clickable[_ngcontent-%COMP%]:hover{cursor:pointer}.non-clickable[_ngcontent-%COMP%]:hover{cursor:not-allowed}.non-clickable[_ngcontent-%COMP%]{opacity:.8}.favorite[_ngcontent-%COMP%], .non-favorite[_ngcontent-%COMP%]{border:#5cb85c solid .2rem;border-radius:.8rem;padding:0 .2rem}.favorite[_ngcontent-%COMP%]{color:#fff;background-color:#5cb85c}.body[_ngcontent-%COMP%]{display:block;white-space:pre-wrap}.footer[_ngcontent-%COMP%]{color:#bbb}.tag-item[_ngcontent-%COMP%]{margin:0 .3rem;padding:0 .2rem;border-radius:.8rem;border:#BBBBBB solid .1rem}.author[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.profile-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.8;outline:#5cb85c solid .2rem}.title[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),e})();var $=l(4834);function q(e,i){1&e&&t._UZ(0,"div",3)}let W=(()=>{class e{ngOnInit(){}range(n,o){return Array.from({length:o-n+1},(a,g)=>n+g)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-loading-tags"]],decls:3,vars:1,consts:[[1,"wrapper"],["fxLayout","row wrapper",1,"wrapper-cell"],["class","text-line random-width",4,"ngFor","ngForOf"],[1,"text-line","random-width"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,q,1,0,"div",2),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("ngForOf",o.range(1,10)))},directives:[f.xw,u.sg],styles:[".wrapper[_ngcontent-%COMP%]{background:#fff;width:100%;height:auto}@keyframes placeHolderShimmer{0%{background-position:-50vw 0}to{background-position:50vw 0}}.animated-background[_ngcontent-%COMP%], .text-line[_ngcontent-%COMP%]{animation-duration:1.5s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:placeHolderShimmer;animation-timing-function:linear;background:#F6F6F6;background:linear-gradient(to right,#F6F6F6 8%,#F0F0F0 18%,#F6F6F6 33%);background-size:95vw;position:relative}.text-line[_ngcontent-%COMP%]{height:1rem;margin:4px .5rem}.random-width[_ngcontent-%COMP%]{margin-bottom:10px}.random-width[_ngcontent-%COMP%]:nth-child(1){width:31%}.random-width[_ngcontent-%COMP%]:nth-child(2){width:44%}.random-width[_ngcontent-%COMP%]:nth-child(3){width:20%}.random-width[_ngcontent-%COMP%]:nth-child(4){width:13%}.random-width[_ngcontent-%COMP%]:nth-child(5){width:59%}.random-width[_ngcontent-%COMP%]:nth-child(6){width:57%}.random-width[_ngcontent-%COMP%]:nth-child(7){width:31%}.random-width[_ngcontent-%COMP%]:nth-child(8){width:44%}.random-width[_ngcontent-%COMP%]:nth-child(9){width:18%}.random-width[_ngcontent-%COMP%]:nth-child(10){width:33%}"]}),e})();var B=l(7423);function z(e,i){1&e&&t._UZ(0,"app-loading-article")}function D(e,i){if(1&e&&(t.TgZ(0,"div",13),t._UZ(1,"app-article",14)(2,"mat-divider"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("article",n)}}function G(e,i){if(1&e&&(t.TgZ(0,"div",11),t.YNc(1,D,3,1,"div",12),t.qZA()),2&e){const n=i.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function E(e,i){1&e&&t._UZ(0,"app-loading-article")}function K(e,i){if(1&e&&(t.TgZ(0,"div",13),t._UZ(1,"app-article",14)(2,"mat-divider"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("article",n)}}function j(e,i){if(1&e&&(t.TgZ(0,"div",11),t.YNc(1,K,3,1,"div",12),t.qZA()),2&e){const n=i.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function X(e,i){1&e&&t._UZ(0,"app-loading-tags")}function R(e,i){1&e&&(t.TgZ(0,"p",18),t._uU(1,"Popular tags"),t.qZA())}const V=function(e){return{"tag-selected":e}};function tt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",19)(1,"span",20),t.NdJ("click",function(){const g=t.CHM(n).$implicit;return t.oxw(3).filter(g)}),t.ALo(2,"async"),t._uU(3),t.qZA()()}if(2&e){const n=i.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngClass",t.VKq(4,V,n==t.lcZ(2,2,o.selectedTag$))),t.xp6(2),t.hij(" ",n," ")}}function et(e,i){if(1&e&&(t.TgZ(0,"div",15),t.YNc(1,R,2,0,"p",16),t.ALo(2,"async"),t.YNc(3,tt,4,6,"div",17),t.qZA()),2&e){const n=i.ngIf,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!t.lcZ(2,2,o.loadingTags$)),t.xp6(2),t.Q6J("ngForOf",n)}}const nt=function(){return[]};function it(e,i){if(1&e&&(t.TgZ(0,"div",3)(1,"mat-tab-group",4),t.ALo(2,"async"),t.TgZ(3,"mat-tab",5),t.YNc(4,z,1,0,"app-loading-article",6),t.ALo(5,"async"),t.YNc(6,G,2,1,"div",7),t.ALo(7,"async"),t.ALo(8,"async"),t.qZA(),t.TgZ(9,"mat-tab",8),t.YNc(10,E,1,0,"app-loading-article",6),t.ALo(11,"async"),t.YNc(12,j,2,1,"div",7),t.ALo(13,"async"),t.ALo(14,"async"),t.qZA()(),t.TgZ(15,"div",9),t.YNc(16,X,1,0,"app-loading-tags",6),t.ALo(17,"async"),t.YNc(18,et,4,4,"div",10),t.ALo(19,"async"),t.ALo(20,"async"),t.qZA()()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("color","accent")("selectedIndex",t.lcZ(2,8,n.myFeed$)==t.DdM(28,nt)?0:1),t.xp6(3),t.Q6J("ngIf",t.lcZ(5,10,n.loadingMyFeed$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(7,12,n.loadingMyFeed$)&&t.lcZ(8,14,n.myFeed$)),t.xp6(4),t.Q6J("ngIf",t.lcZ(11,16,n.loadingSuggestedFedd$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(13,18,n.loadingSuggestedFedd$)&&t.lcZ(14,20,n.suggestedArticles$)),t.xp6(4),t.Q6J("ngIf",t.lcZ(17,22,n.loadingTags$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(19,24,n.loadingTags$)&&t.lcZ(20,26,n.tags$))}}function ot(e,i){1&e&&(t.TgZ(0,"div",21)(1,"span"),t._UZ(2,"mat-spinner",22),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("diameter",50))}function rt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",23)(1,"button",24),t.NdJ("click",function(){return t.CHM(n),t.oxw().retry()}),t._uU(2," Retry "),t.qZA()()}2&e&&(t.xp6(1),t.Q6J("color","accent"))}let at=(()=>{class e{constructor(n){this.store=n,this.token=localStorage.getItem(b.x),this.loading$=this.store.select(p.AP),this.error$=this.store.select(p.Hn),this.userLoaded$=this.store.select(p.j5),this.loadingTags$=this.store.select(p.mr),this.tags$=this.store.select(p.s4),this.selectedTag$=this.store.select(p.lz),this.loadingSuggestedFedd$=this.store.select(p.sP),this.suggestedArticles$=this.store.select(p.z9),this.loadingMyFeed$=this.store.select(p.X_),this.myFeed$=this.store.select(p.o7)}ngOnInit(){this.userLoaded$.subscribe(n=>{1==n&&(this.store.dispatch(r.i$.getTags()),this.store.dispatch(r.i$.getSuggestedFeed()),this.store.dispatch(r.i$.getMyFeed()))})}retry(){this.store.dispatch(O.t.initApp())}filter(n){this.selectedTag$.pipe((0,U.q)(1)).subscribe(o=>{o!==n?(this.store.dispatch(r.i$.getSuggestedFeed({tag:n})),this.store.dispatch(r.i$.addTagFilter(n))):(this.store.dispatch(r.i$.removeTagFilter()),this.store.dispatch(r.i$.getSuggestedFeed()))})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(A.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-home-page"]],decls:6,vars:9,consts:[["class","container","fxLayout","row wrap","fxLayoutAlign","center start",4,"ngIf"],["class","container loading","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["class","container error","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","center start",1,"container"],["animationDuration","0ms","fxFlex","70","fxFlexOrder.lt-md","1","fxFlexOrder.gt-md","0",1,"feed",3,"color","selectedIndex"],["label","Your Feed"],[4,"ngIf"],["class","suggestedFeed",4,"ngIf"],["label","Suggested"],["fxFlex","20","fxFlex.lt-md","95","fxFlexOrder.lt-md","0","fxFlexOrder.gt-md","1",1,"tags-container"],["class","tags","fxLayout","row wrap","fxLayoutAlign"," space-between",4,"ngIf"],[1,"suggestedFeed"],["class","suggested-list",4,"ngFor","ngForOf"],[1,"suggested-list"],[3,"article"],["fxLayout","row wrap","fxLayoutAlign"," space-between",1,"tags"],["fxFlex","100",4,"ngIf"],["class","tags-list",4,"ngFor","ngForOf"],["fxFlex","100"],[1,"tags-list"],["fxLayoutAlign"," space-between",1,"tags-item",3,"ngClass","click"],["fxLayout","row","fxLayoutAlign","center center",1,"container","loading"],["color","accent",3,"diameter"],["fxLayout","row","fxLayoutAlign","center center",1,"container","error"],["mat-button","",3,"color","click"]],template:function(n,o){1&n&&(t.YNc(0,it,21,29,"div",0),t.ALo(1,"async"),t.YNc(2,ot,3,1,"div",1),t.ALo(3,"async"),t.YNc(4,rt,3,1,"div",2),t.ALo(5,"async")),2&n&&(t.Q6J("ngIf",!t.lcZ(1,3,o.loading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,5,o.loading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(5,7,o.error$)))},directives:[u.O5,f.xw,f.Wh,Z.SP,f.yH,f.r7,Z.uX,P,u.sg,w,$.d,W,u.mk,y.oO,F.Ou,B.lW],pipes:[u.Ov],styles:[".container[_ngcontent-%COMP%]{height:90vh;margin:0 20px}.feed[_ngcontent-%COMP%]{width:70%;max-width:70%;min-width:350px}.tags-container[_ngcontent-%COMP%]{width:20%;min-width:200px;max-width:300px}.tags[_ngcontent-%COMP%]{background-color:#f3f3f3;margin:10px;padding:5px;height:auto}.tags-item[_ngcontent-%COMP%]{background-color:#818a91;margin-right:7px;margin-bottom:5px;padding:3px 7px;border-radius:10rem;color:#fff}.tags-item[_ngcontent-%COMP%]:hover{cursor:pointer}.tag-selected[_ngcontent-%COMP%]{background-color:#5cb85c!important}"]}),e})();var ct=l(9841),m=l(4004);function lt(e,i){1&e&&t._UZ(0,"mat-spinner",12),2&e&&t.Q6J("diameter",50)}function st(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"span",19),t.NdJ("click",function(){return t.CHM(n),t.oxw(4).profileSettings()}),t.TgZ(1,"mat-icon"),t._uU(2,"settings"),t.qZA(),t._uU(3," Edit Profile "),t.qZA()}}function gt(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"add"),t.qZA())}function dt(e,i){1&e&&t._UZ(0,"mat-spinner",21),2&e&&t.Q6J("diameter",25)}function pt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"span",19),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().ngIf;return t.oxw(3).follow(a.username)}),t.YNc(1,gt,2,0,"mat-icon",6),t.ALo(2,"async"),t.YNc(3,dt,1,1,"mat-spinner",20),t.ALo(4,"async"),t._uU(5),t.ALo(6,"async"),t.qZA()}if(2&e){const n=t.oxw(4);let o,a,g;t.xp6(1),t.Q6J("ngIf",0==(null==(o=t.lcZ(2,3,n.getLoadings$))?null:o.loadingFollow)),t.xp6(2),t.Q6J("ngIf",1==(null==(a=t.lcZ(4,5,n.getLoadings$))?null:a.loadingFollow)),t.xp6(2),t.hij(" Follow ",null==(g=t.lcZ(6,7,n.getProfile$))?null:g.username," ")}}function ut(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"remove_circle_outline"),t.qZA())}function ft(e,i){1&e&&t._UZ(0,"mat-spinner",21),2&e&&t.Q6J("diameter",25)}function mt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"span",19),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().ngIf;return t.oxw(3).unfollow(a.username)}),t.YNc(1,ut,2,0,"mat-icon",6),t.ALo(2,"async"),t.YNc(3,ft,1,1,"mat-spinner",20),t.ALo(4,"async"),t._uU(5),t.ALo(6,"async"),t.qZA()}if(2&e){const n=t.oxw(4);let o,a,g;t.xp6(1),t.Q6J("ngIf",0==(null==(o=t.lcZ(2,3,n.getLoadings$))?null:o.loadingFollow)),t.xp6(2),t.Q6J("ngIf",1==(null==(a=t.lcZ(4,5,n.getLoadings$))?null:a.loadingFollow)),t.xp6(2),t.hij(" unFollow ",null==(g=t.lcZ(6,7,n.getProfile$))?null:g.username," ")}}function _t(e,i){if(1&e&&(t.ynx(0),t._UZ(1,"img",14),t.TgZ(2,"span",15),t._uU(3),t.qZA(),t.TgZ(4,"span",16),t._uU(5),t.qZA(),t.TgZ(6,"span",17),t.YNc(7,st,4,0,"span",18),t.ALo(8,"async"),t.YNc(9,pt,7,9,"span",18),t.ALo(10,"async"),t.ALo(11,"async"),t.YNc(12,mt,7,9,"span",18),t.ALo(13,"async"),t.ALo(14,"async"),t.qZA(),t.BQk()),2&e){const n=i.ngIf,o=t.oxw(3);let a,g;t.xp6(1),t.Q6J("src",n.image,t.LSH)("alt",n.username+" image"),t.xp6(2),t.Oqu(n.username),t.xp6(2),t.Oqu(n.bio),t.xp6(2),t.Q6J("ngIf",1==t.lcZ(8,7,o.combinedData$)),t.xp6(2),t.Q6J("ngIf",0==t.lcZ(10,9,o.combinedData$)&&0==(null==(a=t.lcZ(11,11,o.getProfile$))?null:a.following)),t.xp6(3),t.Q6J("ngIf",0==t.lcZ(13,13,o.combinedData$)&&1==(null==(g=t.lcZ(14,15,o.getProfile$))?null:g.following))}}function vt(e,i){if(1&e&&(t.TgZ(0,"div",13),t.YNc(1,_t,15,17,"ng-container",6),t.ALo(2,"async"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.getProfile$))}}function ht(e,i){if(1&e&&(t.TgZ(0,"div",9),t.YNc(1,lt,1,1,"mat-spinner",10),t.YNc(2,vt,3,3,"div",11),t.qZA()),2&e){const n=i.ngIf;t.xp6(1),t.Q6J("ngIf",n.loadingProfile),t.xp6(1),t.Q6J("ngIf",0==n.loadingProfile)}}function xt(e,i){1&e&&t._UZ(0,"app-loading-article")}function Zt(e,i){if(1&e&&(t.TgZ(0,"div",24),t._UZ(1,"app-article",25)(2,"mat-divider"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("article",n)}}function At(e,i){if(1&e&&(t.TgZ(0,"div",22),t.YNc(1,Zt,3,1,"div",23),t.qZA()),2&e){const n=i.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function Ft(e,i){1&e&&t._UZ(0,"app-loading-article")}function Ct(e,i){if(1&e&&(t.TgZ(0,"div",24),t._UZ(1,"app-article",25)(2,"mat-divider"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("article",n)}}function Pt(e,i){if(1&e&&(t.TgZ(0,"div",22),t.YNc(1,Ct,3,1,"div",23),t.qZA()),2&e){const n=i.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}const yt=[{path:"",component:at},{path:"profile/:user",component:(()=>{class e{constructor(n,o){this.router=n,this.store=o,this.getLoggedUser$=this.store.select(p.rk),this.currentNavigation=this.router.getCurrentNavigation(),this.getProfile$=this.store.select(p.FF),this.getPersonalArticles$=this.store.select(p.Jb),this.getFavoritedArticles$=this.store.select(p.FN),this.getErrors$=this.store.select(p.Q$),this.getLoadings$=this.store.select(p.zP),this.combinedData$=(0,ct.a)([this.getProfile$,this.getLoggedUser$]).pipe((0,m.U)(([a,g])=>(null==a?void 0:a.username)===(null==g?void 0:g.username)))}ngOnInit(){this.initCurrentProfile(),this.AuthSubscription=this.getLoggedUser$.subscribe(n=>{n&&this.getData()})}ngOnDestroy(){this.AuthSubscription.unsubscribe()}initCurrentProfile(){let n=this.currentNavigation.finalUrl.toString().slice(9);this.currentProfile=decodeURIComponent(n)}getData(){this.store.dispatch(r.M_.getProfileData(this.currentProfile)),this.store.dispatch(r.M_.getPersonalArticles(this.currentProfile)),this.store.dispatch(r.M_.getFavoritedArticles(this.currentProfile))}follow(n){this.store.dispatch(r.M_.Follow(n))}unfollow(n){this.store.dispatch(r.M_.UnFollow(n))}profileSettings(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(x.F0),t.Y36(A.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile"]],decls:18,vars:20,consts:[["fxLayout","column",1,"container"],["fxLayout","column","fxLayoutAlign"," center",1,"top-bar"],["fxFlex","80%",1,"user-info"],["class","user",4,"ngIf"],["animationDuration","0ms","fxFlex","70","selectedIndex","0",1,"feed",3,"color"],["label","Personal Articles"],[4,"ngIf"],["class","suggestedFeed",4,"ngIf"],["label","Favorited Articles"],[1,"user"],["color","accent",3,"diameter",4,"ngIf"],["class","user-details","fxLayout","column","fxLayoutAlign"," center",4,"ngIf"],["color","accent",3,"diameter"],["fxLayout","column","fxLayoutAlign"," center",1,"user-details"],[1,"user-image",3,"src","alt"],[1,"user-name"],[1,"user-bio"],[1,"follow-setting"],["fxLayoutAlign"," center",3,"click",4,"ngIf"],["fxLayoutAlign"," center",3,"click"],[3,"diameter",4,"ngIf"],[3,"diameter"],[1,"suggestedFeed"],["class","suggested-list",4,"ngFor","ngForOf"],[1,"suggested-list"],[3,"article"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,ht,3,2,"div",3),t.ALo(4,"async"),t.qZA()(),t.TgZ(5,"mat-tab-group",4)(6,"mat-tab",5),t.YNc(7,xt,1,0,"app-loading-article",6),t.ALo(8,"async"),t.YNc(9,At,2,1,"div",7),t.ALo(10,"async"),t.ALo(11,"async"),t.qZA(),t.TgZ(12,"mat-tab",8),t.YNc(13,Ft,1,0,"app-loading-article",6),t.ALo(14,"async"),t.YNc(15,Pt,2,1,"div",7),t.ALo(16,"async"),t.ALo(17,"async"),t.qZA()()()),2&n){let a,g,s,c;t.xp6(3),t.Q6J("ngIf",t.lcZ(4,6,o.getLoadings$)),t.xp6(2),t.Q6J("color","accent"),t.xp6(2),t.Q6J("ngIf",null==(a=t.lcZ(8,8,o.getLoadings$))?null:a.loadingPersonalArticles),t.xp6(2),t.Q6J("ngIf",!(null!=(g=t.lcZ(10,10,o.getLoadings$))&&g.loadingPersonalArticles)&&t.lcZ(11,12,o.getPersonalArticles$)),t.xp6(4),t.Q6J("ngIf",null==(s=t.lcZ(14,14,o.getLoadings$))?null:s.loadingFavoritedArticles),t.xp6(2),t.Q6J("ngIf",!(null!=(c=t.lcZ(16,16,o.getLoadings$))&&c.loadingFavoritedArticles)&&t.lcZ(17,18,o.getFavoritedArticles$))}},directives:[f.xw,f.Wh,f.yH,u.O5,F.Ou,T.Hw,Z.SP,Z.uX,P,u.sg,w,$.d],pipes:[u.Ov],styles:[".top-bar[_ngcontent-%COMP%]{background:#f3f3f3;padding:1rem;min-height:15rem}.user[_ngcontent-%COMP%]{height:auto}.user-image[_ngcontent-%COMP%]{border-radius:50%;width:7rem;height:7rem}.user-name[_ngcontent-%COMP%]{font-size:2rem}.user-bio[_ngcontent-%COMP%]{margin-bottom:1rem}.follow-setting[_ngcontent-%COMP%]{outline:solid .2rem #BBBBBB;color:#bbb;padding:.2rem}.follow-setting[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#bbb;color:#fff}"]}),e})()},{path:"**",redirectTo:""}];let Tt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[x.Bz.forChild(yt)],x.Bz]}),e})();var d=l(506),h=l(5577),_=l(262),v=l(9646),Lt=l(3900),wt=l(6129),$t=l(1528),Mt=l(6893),Ot=l(1271);let bt=(()=>{class e{constructor(n,o,a,g){this.action$=n,this.homeService=o,this.profileService=a,this.snackbar=g,this.getTagsEffect$=(0,d.GW)(()=>this.action$.pipe((0,d.l4)(r.i$.getTags),(0,h.z)(()=>this.homeService.getTags().pipe((0,m.U)(s=>r.W4.getTagsSuucess(s)),(0,_.K)(s=>(0,v.of)(r.W4.getTagsFailure(s))))))),this.getSuggestedFedd$=(0,d.GW)(()=>this.action$.pipe((0,d.l4)(r.i$.getSuggestedFeed),(0,Lt.w)(s=>this.homeService.getSuggestedFeed(s.filter).pipe((0,m.U)(c=>r.W4.getSuggestedFeedSuccess(c.articles)),(0,_.K)(c=>(0,v.of)(r.W4.getSuggestedFeedFailure(c))))))),this.getMyFeed$=(0,d.GW)(()=>this.action$.pipe((0,d.l4)(r.i$.getMyFeed),(0,h.z)(s=>this.homeService.getMyFeed().pipe((0,m.U)(c=>r.W4.getMyFeedSuccess(c.articles)),(0,_.K)(c=>(0,v.of)(r.W4.getMyFeedFailure(c))))))),this.addToFavorite$=(0,d.GW)(()=>this.action$.pipe((0,d.l4)(r.i$.favorite),(0,h.z)(s=>this.homeService.addToFavorite(s.slug).pipe((0,m.U)(c=>r.W4.favoriteSuccess(c.article)),(0,_.K)(c=>(0,v.of)(r.W4.favoriteFailure(c))))))),this.removeFromFavorite$=(0,d.GW)(()=>this.action$.pipe((0,d.l4)(r.i$.unfavorite),(0,h.z)(s=>this.homeService.removeFromFavorite(s.slug).pipe((0,m.U)(c=>r.W4.unfavoriteSuccess(c.article)),(0,_.K)(c=>(0,v.of)(r.W4.unfavoriteFailure(c))))))),this.getProfileData$=(0,d.GW)(()=>this.action$.pipe((0,d.l4)(r.M_.getProfileData),(0,wt.z)(s=>this.homeService.getProfile(s.username).pipe((0,m.U)(c=>r.rk.getProfileDataSuccess(c.profile)),(0,_.K)(c=>(0,v.of)(r.rk.getProfileDataFailure(c))))))),this.getPersonalArticles$=(0,d.GW)(()=>this.action$.pipe((0,d.l4)(r.M_.getPersonalArticles),(0,h.z)(s=>this.homeService.getSuggestedFeed({author:s.username}).pipe((0,m.U)(c=>r.rk.getPersonalArticlesSuccess(c.articles)),(0,_.K)(c=>(0,v.of)(r.rk.getPersonalArticlesFailure(c))))))),this.getFavoritedArticles$=(0,d.GW)(()=>this.action$.pipe((0,d.l4)(r.M_.getPersonalArticles),(0,h.z)(s=>this.homeService.getSuggestedFeed({favorited:s.username}).pipe((0,m.U)(c=>r.rk.getFavoritedArticlesSuccess(c.articles)),(0,_.K)(c=>(0,v.of)(r.rk.getFavoritedArticlesFailure(c))))))),this.followUser$=(0,d.GW)(()=>this.action$.pipe((0,d.l4)(r.M_.Follow),(0,h.z)(s=>this.profileService.followUser(s.username).pipe((0,m.U)(c=>r.rk.FollowSuccess(c)),(0,_.K)(c=>(0,v.of)(r.rk.FollowFailure(c))))))),this.unfollowUser$=(0,d.GW)(()=>this.action$.pipe((0,d.l4)(r.M_.UnFollow),(0,h.z)(s=>this.profileService.unfollowUser(s.username).pipe((0,m.U)(c=>r.rk.unFollowSuccess(c)),(0,_.K)(c=>(0,v.of)(r.rk.unFollowFailure(c)))))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(d.eX),t.LFG($t.Y),t.LFG(Mt.H),t.LFG(Ot.ux))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Ut=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,M.m,Tt,d.sQ.forFeature([bt])]]}),e})()}}]);